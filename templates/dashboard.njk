{% extends "base.njk" %}

{% from "govuk/components/table/macro.njk" import govukTable %}

{% block content %}
  {{ super() }}

  <h2 class="govuk-heading-l">Workflows</h2>

  {% for repository in data %}
    <h3 class="govuk-heading-m">{{ repository.name }}</h3>

    {% if repository.workflows.total_count %}
      {{ govukTable({
        caption: "Runs",
        firstCellIsHeader: false,
        head: [
          {
            text: "Started at"
          },
          {
            text: "Ended at"
          },
          {
            text: "Elapsed"
          },
          {
            text: "Outcome"
          }
        ],
        rows: repository.workflows.workflow_runs
      }) }}
    {% else %}
      <p class="govuk-body">The {{ repository.name }} repository does not have any workflows.</p>
    {% endif %}
  {% endfor %}

{% endblock %}
